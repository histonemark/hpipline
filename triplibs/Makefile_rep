hpip_root = @HPIP_ROOT@
libs = @libs@
rep = @REP@

# targets
runs = cDNA gDNA iPCR
noDNA = $(addsuffix _noDNA, $(runs))
libs_stats = $(addsuffix .stats, $(join $(addsuffix /, $(libs)), $(libs)))
libs_statistics = libs_statistics.txt
force_look = force_look

all : $(libs) $(libs_statistics)

$(libs) : $(runs) $(force_look)
	$(MAKE) -C $@ $(MAKECMDGOALS)

$(runs) : $(noDNA) $(force_look)
	$(MAKE) -C $@ $(MAKECMDGOALS)

$(noDNA) : $(force_look)
	$(MAKE) -C $@ $(MAKECMDGOALS)

force_look :
	@true

$(libs_stats) : $(libs)

$(libs_statistics) : $(libs_stats)
	echo "# iPCR in_cDNA in_gDNA in_both" > $@
	cat $(libs_stats) >> $@
