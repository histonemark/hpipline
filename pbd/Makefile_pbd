# general variables
hpip_root = @HPIP_ROOT@

# the main target is the promoter-barcode dictionary (pbd)
pbd = pbd.txt

# intermediate targets: the starcoded promoters
libs_dir = pbd_libs
libs = $(libs_dir)/HPIP_bcds_A1toA12 \
       $(libs_dir)/HPIP_bcds_B1toB12 \
       $(libs_dir)/HPIP_bcds_C1toC12 \
       $(libs_dir)/HPIP_bcds_D1toD12 \
       $(libs_dir)/HPIP_bcds_E1toE12 \
       $(libs_dir)/HPIP_bcds_F1toF12 \
       $(libs_dir)/HPIP_bcds_G1toG12 \
       $(libs_dir)/HPIP_bcds_H1toH12

# generate promoter-barcode dictionary script and log
generate_pbd = python @HPIP_ROOT@/hpipline/pbd/generate_pbd.py
generate_pbd_log = generate_pbd.log

all : $(pbd)

$(pbd) : $(libs)
	$(generate_pbd) $(hpip_root)

$(libs) ::
	$(MAKE) -C $@ $(MAKECMDGOALS)
